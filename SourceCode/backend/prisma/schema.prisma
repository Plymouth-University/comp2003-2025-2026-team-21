generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                   String   @id @default(uuid())
  email                String   @unique
  username             String   @unique
  password             String
  role                 Role     @default(STUDENT)
  name                 String?
  createdAt            DateTime @default(now())
  profileImage         Bytes?
  profileImageMimeType String?
  events               Event[]
  Posts                Posts[]
  organisation         Organisation?
}

model Organisation {
  id                   String   @id @default(uuid())
  name                 String
  createdAt            DateTime @default(now())
  evidenceImage        Bytes?
  evidenceImageMimeType String?
  userId               String   @unique
  user                 User     @relation(fields: [userId], references: [id])
}

model Event {
  id                 String   @id @default(uuid())
  title              String
  description        String
  date               DateTime
  location           String
  price              String
  createdAt          DateTime @default(now())
  organiserId        String
  eventImage         Bytes?
  eventImageMimeType String?
  organiser          User     @relation(fields: [organiserId], references: [id])
}

model Posts {
  id            String   @id @default(uuid())
  caption       String
  image         Bytes
  imageMimeType String
  createdAt     DateTime @default(now())
  likes         Int      @default(0)
  authorId      String
  User          User     @relation(fields: [authorId], references: [id])
}

enum Role {
  STUDENT
  ORGANISATION
  ADMIN
}
